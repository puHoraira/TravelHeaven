# Travel Heaven - Architecture Diagrams

## ğŸ—ï¸ System Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         CLIENT BROWSER                           â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ Admin UI     â”‚  â”‚ Guide UI     â”‚  â”‚ User UI      â”‚          â”‚
â”‚  â”‚ - Approvals  â”‚  â”‚ - Add Loc    â”‚  â”‚ - Browse     â”‚          â”‚
â”‚  â”‚ - Stats      â”‚  â”‚ - Add Hotel  â”‚  â”‚ - Book       â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                                   â”‚
â”‚                  React + Router + Zustand                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚ HTTP/REST
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      EXPRESS.JS SERVER                           â”‚
â”‚                                                                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ MIDDLEWARE STACK â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚
â”‚  â”‚  â”‚ Auth     â”‚â†’ â”‚ Authorizeâ”‚â†’ â”‚ Validate â”‚â†’ â”‚ Upload â”‚ â”‚   â”‚
â”‚  â”‚  â”‚ (Decor)  â”‚  â”‚ (Strategyâ”‚  â”‚ (Decor)  â”‚  â”‚ (Decor)â”‚ â”‚   â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                              â”‚                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ CONTROLLERS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚        â”‚
â”‚  â”‚  â”‚ Auth     â”‚  â”‚ Location â”‚  â”‚ Hotel    â”‚  etc... â”‚        â”‚
â”‚  â”‚  â”‚ Controllerâ”‚  â”‚ Controllerâ”‚  â”‚ Controllerâ”‚        â”‚        â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                              â”‚                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ PATTERNS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚           â”‚
â”‚  â”‚  â”‚ Factory  â”‚  â”‚ Observer â”‚  â”‚ Strategy â”‚      â”‚           â”‚
â”‚  â”‚  â”‚ (Create) â”‚  â”‚ (Notify) â”‚  â”‚ (Authorize)â”‚     â”‚           â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                              â”‚                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ REPOSITORIES â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚           â”‚
â”‚  â”‚  â”‚ Location â”‚  â”‚ Hotel    â”‚  â”‚ Transportâ”‚      â”‚           â”‚
â”‚  â”‚  â”‚ Repo     â”‚  â”‚ Repo     â”‚  â”‚ Repo     â”‚      â”‚           â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    DATABASE (MongoDB)                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚ Users    â”‚  â”‚ Locationsâ”‚  â”‚ Hotels   â”‚  â”‚ Transportâ”‚       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚                    Singleton Connection                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ Request Flow - Guide Adds Location

```
1. Guide UI
   â”‚
   â”œâ”€ User fills form with location details
   â”œâ”€ Uploads images
   â””â”€ Submits
      â”‚
      â–¼
2. Frontend
   â”‚
   â”œâ”€ Validates input
   â”œâ”€ Attaches JWT token
   â””â”€ POST /api/locations
      â”‚
      â–¼
3. Express Server - Middleware Chain (Decorator Pattern)
   â”‚
   â”œâ”€ authenticate
   â”‚  â”œâ”€ Verifies JWT token
   â”‚  â””â”€ Attaches user to request
   â”‚
   â”œâ”€ authorize('guide')
   â”‚  â””â”€ Checks user.role === 'guide'
   â”‚
   â”œâ”€ upload.array('images', 5)
   â”‚  â””â”€ Processes uploaded images
   â”‚
   â””â”€ validate
      â””â”€ Validates request body
      â”‚
      â–¼
4. Location Controller
   â”‚
   â”œâ”€ Receives validated request
   â””â”€ Calls repository
      â”‚
      â–¼
5. Factory Pattern
   â”‚
   â””â”€ Creates LocationRepository
      â”‚
      â–¼
6. Location Repository (Repository Pattern)
   â”‚
   â”œâ”€ Adds guideId and status='pending'
   â””â”€ Saves to database
      â”‚
      â–¼
7. Database (Singleton Connection)
   â”‚
   â””â”€ Stores location document
      â”‚
      â–¼
8. Observer Pattern
   â”‚
   â”œâ”€ EmailNotificationObserver â†’ Sends email to admin
   â”œâ”€ LogNotificationObserver â†’ Logs event
   â””â”€ DatabaseNotificationObserver â†’ Saves notification
      â”‚
      â–¼
9. Response
   â”‚
   â””â”€ Returns success with location data
      â”‚
      â–¼
10. Frontend
    â”‚
    â”œâ”€ Shows success toast
    â””â”€ Updates UI
```

## ğŸ”’ Admin Approval Flow

```
1. Admin Dashboard
   â”‚
   â””â”€ Views pending items
      â”‚
      â–¼
2. Admin clicks "Approve" on location
   â”‚
   â””â”€ PUT /api/admin/approve/location/:id
      â”‚
      â–¼
3. Middleware Chain
   â”‚
   â”œâ”€ authenticate â†’ Verifies JWT
   â”œâ”€ authorize('admin') â†’ Checks admin role
   â”‚
   â–¼
4. Admin Controller
   â”‚
   â”œâ”€ Gets repository from Factory
   â””â”€ Updates approval status
      â”‚
      â–¼
5. Repository Pattern
   â”‚
   â”œâ”€ Updates: approvalStatus = 'approved'
   â”œâ”€ Sets: approvedBy = adminId
   â””â”€ Sets: approvedAt = now()
      â”‚
      â–¼
6. Observer Pattern (Notifications)
   â”‚
   â”œâ”€ EmailNotificationObserver
   â”‚  â””â”€ Emails guide: "Your location was approved!"
   â”‚
   â”œâ”€ LogNotificationObserver
   â”‚  â””â”€ Logs: "Location ABC approved by Admin XYZ"
   â”‚
   â””â”€ DatabaseNotificationObserver
      â””â”€ Saves notification for guide
      â”‚
      â–¼
7. Response
   â”‚
   â””â”€ Returns updated location
      â”‚
      â–¼
8. Frontend
   â”‚
   â”œâ”€ Shows success message
   â”œâ”€ Removes from pending list
   â””â”€ Location now visible to all users
```

## ğŸ¯ Strategy Pattern - Authorization

```
Request to create location
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  authorize('guide', 'admin')   â”‚
â”‚  middleware                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AuthorizationStrategyFactory  â”‚
â”‚  .createStrategy(user.role)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â”œâ”€â”€â”€ user.role = 'admin' â”€â”€â†’ AdminAuthorizationStrategy
        â”‚                             â””â”€ canAccess() â†’ true (all access)
        â”‚
        â”œâ”€â”€â”€ user.role = 'guide' â”€â”€â†’ GuideAuthorizationStrategy
        â”‚                             â””â”€ canAccess('location', 'create') â†’ true
        â”‚
        â””â”€â”€â”€ user.role = 'user' â”€â”€â”€â†’ UserAuthorizationStrategy
                                      â””â”€ canAccess('location', 'create') â†’ false
```

## ğŸ­ Factory Pattern - Repository Creation

```
Controller needs repository
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ServiceFactory.createRepository()  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â”œâ”€â”€â”€ 'location' â”€â”€â†’ new LocationRepository()
        â”œâ”€â”€â”€ 'hotel' â”€â”€â”€â”€â”€â†’ new HotelRepository()
        â”œâ”€â”€â”€ 'transport' â”€â†’ new TransportRepository()
        â”œâ”€â”€â”€ 'booking' â”€â”€â”€â†’ new BookingRepository()
        â””â”€â”€â”€ 'user' â”€â”€â”€â”€â”€â”€â†’ new UserRepository()
                              â”‚
                              â–¼
                    All extend BaseRepository
                    (Repository Pattern)
```

## ğŸ‘ï¸ Observer Pattern - Notification Flow

```
Admin approves location
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  approvalSubject.notify()   â”‚
â”‚  (Subject)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                         â”‚
        â–¼                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ EmailObserver    â”‚   â”‚ LogObserver      â”‚
â”‚ .update()        â”‚   â”‚ .update()        â”‚
â”‚ â””â”€ Send email    â”‚   â”‚ â””â”€ Write log     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚                         â”‚
        â”‚                         â–¼
        â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚              â”‚ DatabaseObserver â”‚
        â”‚              â”‚ .update()        â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ â””â”€ Save notif    â”‚
                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ—„ï¸ Repository Pattern - Data Access

```
Controller
    â”‚
    â””â”€ needs to find locations
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  LocationRepository      â”‚
â”‚  extends BaseRepository  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
        â”‚
        â”œâ”€ findAll(filter, options)
        â”œâ”€ findById(id)
        â”œâ”€ findApproved() â† Specific to Location
        â”œâ”€ findPending() â† Specific to Location
        â”œâ”€ create(data)
        â”œâ”€ update(id, data)
        â””â”€ delete(id)
            â”‚
            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Mongoose Model          â”‚
â”‚  (Location)              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  MongoDB Database        â”‚
â”‚  (Singleton Connection)  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ­ Role-Based UI

```
User Login
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Check user.role    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â”œâ”€â”€â”€ role = 'admin' â”€â”€â†’ Admin Dashboard
    â”‚                       â”œâ”€ Pending Approvals
    â”‚                       â”œâ”€ Statistics
    â”‚                       â””â”€ All Content
    â”‚
    â”œâ”€â”€â”€ role = 'guide' â”€â”€â†’ Guide Dashboard
    â”‚                       â”œâ”€ My Locations
    â”‚                       â”œâ”€ My Hotels
    â”‚                       â””â”€ My Transport
    â”‚
    â””â”€â”€â”€ role = 'user' â”€â”€â”€â†’ User Dashboard
                            â”œâ”€ Browse Locations
                            â”œâ”€ Browse Hotels
                            â””â”€ My Bookings
```

## ğŸ” Authentication Flow

```
1. User submits login credentials
        â”‚
        â–¼
2. Backend verifies (bcrypt compare)
        â”‚
        â”œâ”€ Invalid â†’ 401 Unauthorized
        â”‚
        â””â”€ Valid
            â”‚
            â–¼
3. Generate JWT token
   â”œâ”€ Payload: { userId, role }
   â”œâ”€ Secret: JWT_SECRET
   â””â”€ Expiry: 7 days
        â”‚
        â–¼
4. Send token to client
        â”‚
        â–¼
5. Client stores token (localStorage)
        â”‚
        â–¼
6. Subsequent requests
   â”œâ”€ Attach token in header
   â”‚  â””â”€ Authorization: Bearer <token>
   â”‚
   â–¼
7. Backend verifies token
   â”œâ”€ Invalid â†’ 401 & redirect to login
   â””â”€ Valid â†’ Attach user to request
```

## ğŸ“Š Data Model Relationships

```
User
 â”œâ”€ role: admin | guide | user
 â”‚
 â”œâ”€ If Guide:
 â”‚   â”œâ”€â†’ Location (guideId)
 â”‚   â”œâ”€â†’ Hotel (guideId)
 â”‚   â””â”€â†’ Transport (guideId)
 â”‚
 â”œâ”€ If User:
 â”‚   â””â”€â†’ Booking (userId)
 â”‚
 â””â”€ If Admin:
     â””â”€â†’ Approvals (approvedBy)

Location
 â”œâ”€ guideId â†’ User (Guide)
 â”œâ”€ approvalStatus: pending | approved | rejected
 â”œâ”€ approvedBy â†’ User (Admin)
 â””â”€â†’ Hotel (locationId)
 â””â”€â†’ Transport (locationId)

Hotel
 â”œâ”€ locationId â†’ Location
 â”œâ”€ guideId â†’ User (Guide)
 â”œâ”€ approvalStatus
 â””â”€ approvedBy â†’ User (Admin)

Transport
 â”œâ”€ locationId â†’ Location
 â”œâ”€ guideId â†’ User (Guide)
 â”œâ”€ approvalStatus
 â””â”€ approvedBy â†’ User (Admin)

Booking
 â”œâ”€ userId â†’ User
 â”œâ”€ referenceId â†’ Hotel | Transport
 â”œâ”€ bookingType: hotel | transport | package
 â””â”€ status: pending | confirmed | cancelled
```

## ğŸŒŸ Pattern Interactions

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚   Request   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚  Decorator Pattern (Middleware)â”‚
         â”‚  â”œâ”€ Authenticate               â”‚
         â”‚  â”œâ”€ Authorize (Strategy)       â”‚
         â”‚  â””â”€ Validate                   â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚       Controller               â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚  Factory Pattern               â”‚
         â”‚  (Create Repository)           â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚  Repository Pattern            â”‚
         â”‚  (Data Access)                 â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                          â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚  Singleton Pattern             â”‚
         â”‚  (Database Connection)         â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â”‚
                    â”Œâ”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”
                    â”‚           â”‚
                    â–¼           â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚   Database   â”‚  â”‚   Observer   â”‚
         â”‚              â”‚  â”‚   (Notify)   â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â–¼         â–¼         â–¼
                    Email      Log      Database
```

---

**Note**: These diagrams show the flow and structure of the application. 
Refer to actual code files for implementation details.
